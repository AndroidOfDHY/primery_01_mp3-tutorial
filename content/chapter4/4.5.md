# 生命周期管理

>##### 学习Tips：大家都知道人是有生老病死这样的生命周期的，那么Activity是不是也有其特定的生命周期存在？本次课程就来为大家讲解Activity的生命周期。

## 1. 学习视频

<iframe frameborder="0" width="640" height="498" src="https://v.qq.com/iframe/player.html?vid=z0180bhmznp&tiny=0&auto=0" allowfullscreen></iframe>

## 2. Activity生命周期

Android是通过一种Activity栈的方式来管理Activity的

![activity_stack.png](/images/chapter4/activity_stack.png)
 
 －接收数据（接收方）
 
 ```
   Intent intent  = getIntent();   
   String  data  = intent.getStringExtra("extra_data");
 ```
 
(2) 需要返回结果的启动

　　startActivityForResult()方法接收两个参数，第一个参数是Intent，第二个参数是请求码，用于在之后的回调中判断数据的来源。
  
　　a) 启动新Activity
  
 ```
  Intent intent  = new Intent(FirstActivity.this,  SecondActivity.class); 
  startActivityForResult(intent,  1);
 ```
 
　　b) 在被启用Activity中设置返回数据
 
 ```
  Intent intent  = new Intent(); 
  intent.putExtra("data_return",  "Hello FirstActivity"); 
  setResult(RESULT_OK,  intent);
 ```
 
　　c) 在主Activity中接收返回数据
  
 ```
  @Override 
  protected void onActivityResult(intrequestCode,  intresultCode,  Intent data) { 
      switch (requestCode)  { 
      case 1:   
          if (resultCode  == RESULT_OK) { 
              String returnedData  = data.getStringExtra("data_return"); 
              Log.d("FirstActivity",  returnedData); 
          }   
          break; 
      } 
  }
 ```
 
 (3) Back键返回数据的接收
 
 　　在被启用Activity中重写以下方法
   
```
  @Override 
  public void onBackPressed()  { 
      Intent intent  = new Intent(); 
      intent.putExtra("data_return",  "Hello FirstActivity"); 
      setResult(RESULT_OK,  intent); 
      finish();   // 此处不能省
  }
```