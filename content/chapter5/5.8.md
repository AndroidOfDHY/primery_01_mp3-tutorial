
# 5.8 读取SD卡数据

>##### 学习Tips：我们完成了解析XML文件的工作，那么对于我们之前导入到SD卡中的XML文件，我们该如何读取呢？快来学习吧~

## 1. 学习视频

<iframe frameborder="0" width="640" height="498" src="https://v.qq.com/iframe/player.html?vid=z0180bhmznp&tiny=0&auto=0" allowfullscreen></iframe>

## 2. 读取SD卡数据

首先实现数据总控方法

```
  public static void initData() {
     try{
        // 通过外部文件的文件名获取输入流
        InputStreaminputStream = getInputStreamFromSDcard("Mp3player.xml");
        // 获取xml 解析器
        XmlPullParserxmlParse = Xml.newPullParser();
        // 设置解析器输入流及编码格式
        xmlParse.setInput(inputStream, "utf-8");
        // 对xml数据流进行解析
        allList= ParseXml(xmlParse);
    } catch (Exception e) {
        Log.d("TAG", e.toString());
    }
  }
```

```
  intevnType = xmlParse.getEventType(); //开始解析事件:得到第一个事件类型
  //处理事件，不碰到文档结束就一直处理
  while(evnType != XmlPullParser.END_DOCUMENT){
    switch(evnType){
      case XmlPullParser.START_DOCUMENT://判断当前事件是否是文档开始事件 
         dataList =new ArrayList<实体类>();//初始化数据集合 
         break;
      case XmlPullParser.START_TAG: //判断当前事件是否是标签元素开始事件
         String tag = xmlParse.getName();
         if(tag.equalsIgnoreCase("XXXXX")){ //判断开始标签元素是否是XXXXX
            //可以处理以下工作：
            // 创建实体对象：如 data = new 实体类();
            // 通过xmlParse.getAttributeValue(0)获取节点第1个属性值
            // 通过xmlParse.nextText() 得到节点字符型数据值
         }
         break; 
      case XmlPullParser.END_TAG://判断当前事件是否是标签元素结束事件 
         if("XXXX".equals(parser.getName())){//判断结束标签元素是否是XXXX 
             dataList.add(data);//将data添加到dataList集合 
             data = null;  
         } 
         break; 
      case XmlPullParser.END_DOCUMENT: // 文档结束时的处理
         break;
    } 
    event = xmlParse.next();//进入下一个元素并触发相应事件 
  }//循环结束  
```