# 6.5 性能优化

>##### 学习Tips：上次课程我们知道了ListView加载数据时不能一次性全部加载，那么解决这个问题后，还存在哪些隐患呢？

## 1. 学习视频

<iframe frameborder="0" width="640" height="498" src="https://v.qq.com/iframe/player.html?vid=z0180bhmznp&tiny=0&auto=0" allowfullscreen></iframe>

## 2. 性能进一步优化

**问题:** 在控件的容器中通过findViewById的方法来获得。如果这个容器非常复杂，这显然会增加系统资源的开销。

**解决方案:** 使用Tag的概念。

**原理:** 当convertView为空时，用setTag()方法为每个View绑定一个存放控件的ViewHolder对象。当convertView不为空，重复利用已经创建的view的时候，使用getTag()方法获取绑定的ViewHolder对象，这样就避免了findViewById对控件的层层查询，而是快速定位到控件。

```
  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
        //当convertView不为空的时候直接重新使用convertView从而减少了很多不必要的View的创建
        if(convertView == null) {
            // 使用LayoutInfalter对象来导入布局
            convertView= View.inflate(Mp3ListActivity.this, R.layout.mp3item, null);
        }
        // 找到item中的元素，并设置相应的数据
        ((TextView) convertView.findViewById(R.id.mp3_item_title))
.setText(mAllList.get(position).getMp3name());
        ((TextView) convertView.findViewById(R.id.mp3_item_artist))
           .setText(mAllList.get(position).getMp3singer());
        return convertView;//　返回组装后的item view
  }
```
