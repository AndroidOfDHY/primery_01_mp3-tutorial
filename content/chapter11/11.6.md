# 11.6 音乐下载方法封装

>##### 学习Tips：我们对于Http请求封装过实用工具类，那么对于歌曲的下载，也是我们MP3播放器经常使用的，所以我们也需要将歌曲下载方法进行封装为工具类。

## 1. 学习视频

<iframe frameborder="0" width="640" height="498" src="https://v.qq.com/iframe/player.html?vid=z0180bhmznp&tiny=0&auto=0" allowfullscreen></iframe>

## 2. 音乐异步下载方法封装

MyListAdapter自定义适配器类

```
  // 自定义的适配器类
  public class MyListAdapter extends BaseAdapter {
      private class textViewHolder {
          TextView mp3Name;
          TextView mp3Singer;
      }

      private List<MP3> mAllList;

      public MyListAdapter() {
          this.mAllList = DataUtils.getAllList();
      }

      @Override
      public int getCount() {
          return mAllList.size();
      }

      @Override
      public Object getItem(int position) {
          return mAllList.get(position);
      }

      @Override
      public long getItemId(int position) {
          return position;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
          textViewHolder holder = null;
          if (convertView != null) {
              holder = (textViewHolder) convertView.getTag();
          } else {
              convertView = View.inflate(Mp3ListActivity.this,
                      R.layout.mp3item, null);
              holder = new textViewHolder();
              holder.mp3Name = (TextView) convertView
                      .findViewById(R.id.mp3_item_title);
              holder.mp3Singer = (TextView) convertView
                      .findViewById(R.id.mp3_item_artist);
              convertView.setTag(holder);
          }

          MP3 mp3Music = mAllList.get(position);

          if (mp3Music != null) {
              holder.mp3Name.setText(mp3Music.getMp3name());
              holder.mp3Singer.setText(mp3Music.getMp3singer());
          }
          return convertView;
      }
  }
```

DownloadAsyncTask异步下载任务类

```
  //创建异步任务对象
  MusicAnycTasktask = newMusicAnycTask();
  task.execute(uri);
```